(function(){"use strict";const t=GM_getResourceText("ELEMENT_CSS");GM_addStyle(t);GM_addStyle(`\n        #vueApp{\n            position: fixed;\n            top: 50%;\n            right: 30px;\n            z-index: 99999;\n        }\n        #vueApp .fix-tabs{\n            display: flex;\n            flex-direction: column-reverse;\n        }\n        #vueApp .logBox{\n            margin-bottom: 20px;\n            max-height: 300px;\n            overflow: auto;\n        }\n        #vueApp .process-progress{\n            display: flex;\n            flex-wrap: wrap;\n            gap: 10px;\n            margin-top: 10px;\n            justify-content: space-between;\n            align-items: center;\n        }\n        .is-blockPopUps [data-testid="beast-core-modal-mask"],\n        .is-blockPopUps [data-testid="beast-core-modal"]{\n            display: none !important;\n        }\n        .el-overlay.is-message-box {\n          z-index: 999999 !important; /* 例如 3000 */\n        }\n    `);let e=`\n        <div id="vueApp">\n            <el-button type="info" @click="openPanl">TEMUHOOK</el-button>\n\n            <el-drawer v-model="settingDrawer" title="设置面板" :with-header="false" >\n\n                <el-tabs type="border-card" class="fix-tabs" v-model="currentTab">\n\x3c!--                     <el-tab-pane label="全局">\n                        <el-form :model="configSetting" label-width="auto">\n                            <el-form-item label="隐藏弹窗">\n                                <el-switch v-model="configSetting.blockPopUps" :disabled="fetchState" />\n                            </el-form-item>\n                            <el-form-item label="页面大小">\n                                <el-input v-model="configSetting.pageSize" :disabled="fetchState" />\n                            </el-form-item>\n                            <el-form-item label="起始页码">\n                                <el-input v-model="configSetting.pageNum" :disabled="fetchState" />\n                            </el-form-item>\n                            <el-form-item label="自动翻页">\n                                <el-switch v-model="configSetting.autoPage" :disabled="fetchState" />\n                            </el-form-item>\n                            <el-form-item label="等待时间">\n                                <el-input v-model="configSetting.waitSeconds" :disabled="fetchState" />\n                            </el-form-item>\n                        </el-form>\n                    </el-tab-pane> --\x3e\n                    <el-tab-pane label="上新生命周期" name="SMZQ">\n                        <el-form :model="configSetting" label-width="auto">\n                            <el-table :data="configSetting.abandonPriceRule" style="width: 100%">\n                                <el-table-column label="价格(分)">\n                                    <template #default="scope">\n                                        <el-input-number v-model="scope.row.price" :min="0" :precision="0" :disabled="fetchState" controls-position="right" />\n                                    </template>\n                                </el-table-column>\n                                <el-table-column label="最高价格(分)">\n                                    <template #default="scope">\n                                        <el-input-number v-model="scope.row.maxPrice" :min="0" :precision="0" :disabled="fetchState" controls-position="right" />\n                                    </template>\n                                </el-table-column>\n                                <el-table-column label="" width="100">\n                                    <template #default="scope">\n                                        <el-button size="small" type="danger" @click="SMZQ_abandonPriceRuleDelete(scope.$index, scope.row)" :disabled="fetchState">\n                                        Delete\n                                        </el-button>\n                                    </template>\n                                </el-table-column>\n                            </el-table>\n                            <div style="margin-top: 30px;">\n                                <el-button type="info" @click="SMZQ_abandonPriceRuleAdd" :disabled="configSetting.abandonPriceRule.length > 0">添加金额规则</el-button>\n                            </div>\n                        </el-form>\n                    </el-tab-pane>\n                    <el-tab-pane label="活动申报" name="HDSB">\n                        <el-form :model="configSetting" label-width="auto">\n                            <el-table :data="configSetting.activityPriceRule" style="width: 100%">\n                                <el-table-column label="价格(分)">\n                                    <template #default="scope">\n                                        <el-input-number v-model="scope.row.price" :min="0" :precision="0" :disabled="fetchState" controls-position="right" />\n                                    </template>\n                                </el-table-column>\n                                <el-table-column label="最高价格(分)">\n                                    <template #default="scope">\n                                        <el-input-number v-model="scope.row.maxPirce" :min="0" :precision="0" :disabled="fetchState" controls-position="right" />\n                                    </template>\n                                </el-table-column>\n                                <el-table-column label="" width="100">\n                                    <template #default="scope">\n                                        <el-button size="small" type="danger" @click="HDSB_activityPirceDelete(scope.$index, scope.row)" :disabled="fetchState">\n                                        Delete\n                                        </el-button>\n                                    </template>\n                                </el-table-column>\n                            </el-table>\n                            <div style="margin-top: 30px;">\n                                <el-button type="info" @click="HDSB_activityPirceAdd" :disabled="configSetting.activityPriceRule.length > 0">添加金额规则</el-button>\n                            </div>\n                        </el-form>\n                        <el-divider>分割线</el-divider>\n                        <el-form :model="configSetting" label-width="auto">\n                            <el-table :data="configSetting.activityFilerStrRule" style="width: 100%">\n                                <el-table-column label="SKU属性集">\n                                    <template #default="scope">\n                                        <el-input v-model="scope.row.str"  :disabled="fetchState" controls-position="right" />\n                                    </template>\n                                </el-table-column>\n                                <el-table-column label="" width="100">\n                                    <template #default="scope">\n                                        <el-button size="small" type="danger" @click="HDSB_activityFilerStrDel(scope.$index, scope.row)" :disabled="fetchState">\n                                        Delete\n                                        </el-button>\n                                    </template>\n                                </el-table-column>\n                            </el-table>\n                            <div style="margin-top: 30px;">\n                                <el-button type="info" @click="HDSB_activityFilerStrAdd">添加字符匹配过滤</el-button>\n                            </div>\n                        </el-form>\n                    </el-tab-pane>\n                </el-tabs>\n\n                <div style="margin-top: 30px;" v-if="malInfoList.length">\n                    <el-radio-group v-model="configSetting.mallId">\n                        <el-radio v-for="item in malInfoList" :key="item.mallId" :value="item.mallId" :disabled="fetchState">{{item.mallName}}</el-radio>\n                    </el-radio-group>\n                </div>\n\n                <div style="margin-top: 30px;">\n                    <el-button type="info" @click="dialogLogVisible = true">日志</el-button>\n                <div>\n\n\n                <div style="margin-top: 30px;" v-if="getUserInfoState && configSetting.mallId">\n                  <el-button v-if="currentTab == 'SMZQ'" :loading="fetchState" type="primary" @click="handleClick('上新生命周期')">上新生命周期</el-button>\n\n\x3c!--                       <el-button type="info" @click="handleClick('批量签署JIT规则')">批量签署JIT规则</el-button> --\x3e\n\n                    <el-button v-if="currentTab == 'HDSB'" :loading="fetchState" type="primary" @click="handleClick('批量活动申报')">批量活动申报</el-button>\n                </div>\n\n            </el-drawer>\n\n            <el-dialog v-model="dialogLogVisible" :title="'日志: ' + clickState" destroy-on-close>\n                <template v-if="clickState == '上新生命周期'">\n                    <div class="logBox" v-if="logList.length">\n                        <ul>\n                            <li v-for="item in logList">\n                                {{item.text}}\n                            </li>\n                        </ul>\n                    </div>\n                    <template v-if="logInfo.totals > 0">\n                        <div><el-progress :percentage="Number((logInfo.index / logInfo.totals * 100).toFixed(2))" /></div>\n                        <div class="process-progress"><span>任务进度: {{logInfo.text}}</span><span>{{logInfo.index}}/{{logInfo.totals}}</span></div>\n                    </template>\n                </template>\n                <template v-if="clickState == '批量签署JIT规则'">\n                    <div class="logBox" v-if="logList.length">\n                        <ul>\n                            <li v-for="item in logList">\n                                {{item.text}}\n                            </li>\n                        </ul>\n                    </div>\n                </template>\n                <template v-if="clickState == '批量活动申报'">\n                    <div class="logBox" v-if="logList.length">\n                        <ul>\n                            <li v-for="item in logList">\n                                {{item.text}}\n                            </li>\n                        </ul>\n                    </div>\n                </template>\n            </el-dialog>\n        </div>\n    `;let i=document.createElement("div");i.innerHTML=e;document.body.append(i);console.log(GM_getValue("configSetting"));const n={data(){return{settingDrawer:false,currentTab:"SMZQ",dialogLogVisible:false,configSetting:Object.assign({Cookie:"",blockPopUps:false,pageSize:100,pageNum:1,autoPage:true,waitSeconds:3,abandonPriceRule:[],activityPriceRule:[],activityFilerStrRule:[],token:null},GM_getValue("configSetting"),{Cookie:document.cookie}),getUserInfoState:false,clickState:"",fetchState:false,malInfoList:[],logList:[],logInfo:{index:0,totals:0,text:""}}},mounted(){this.$nextTick((()=>{this.getUserInfo();const t=unsafeWindow.document.body;if(this.configSetting.blockPopUps){t.classList.add("is-blockPopUps")}this.configSetting}))},methods:{openPanl:async function(){let t=await this.checkToken();if(t){this.settingDrawer=true}},login(){this.$prompt("输入令牌","提示",{confirmButtonText:"确定",cancelButtonText:"取消",customClass:"login-message-box",inputPattern:/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/,inputErrorMessage:"输入令牌格式不正确"}).then((({value:t})=>{let e="http://182.254.136.122:8765/login";GM_xmlhttpRequest({url:e,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({username:t}),onload:e=>{if(e.status==200){this.configSetting.token=t;this.$message({type:"success",message:"你的令牌是: "+t});this.settingDrawer=true}else{this.$message({type:"error",message:"没有此令牌"});setTimeout((()=>{this.login()}),1e3)}},onerror:t=>{console.error("Error:",t)}})})).catch((()=>{this.$message({type:"error",message:"取消输入"})}))},checkToken:async function(){let t="http://182.254.136.122:8765/protected";return new Promise(((e,i)=>{if(!this.configSetting.token){this.login();e(false);return}GM_xmlhttpRequest({url:t,method:"GET",headers:{"X-Username":this.configSetting.token},onload:t=>{if(t.status===200){e(true)}else{this.configSetting.token=null;this.login();this.$message({type:"error",message:"失效的令牌"});e(false)}},onerror:t=>{console.error("Error:",t);e(false)}})}))},HDSB_getMatch:function(t){const e=this.configSetting;const i=new URLSearchParams(window.location.search);let n=i.get("type");let o=i.get("thematicId");const s="https://seller.kuajingmaihuo.com/marvel-mms/cn/api/kiana/gambit/marketing/enroll/scroll/match";const l={activityThematicId:o*1,activityType:n*1,addSite:true,rowCount:50};if(t){l["searchScrollContext"]=t}return fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Cookie:e.Cookie,mallid:e.mallId},body:JSON.stringify(l)}).then((t=>t.json()))},HDSB_submit:async function(t){const e=this.configSetting;const i=new URLSearchParams(window.location.search);const n="https://seller.kuajingmaihuo.com/marvel-mms/cn/api/kiana/gambit/marketing/enroll/submit";let o=i.get("type");let s=i.get("thematicId");const l={activityThematicId:s,activityType:o,productList:t};return fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Cookie:e.Cookie,mallid:e.mallId},body:JSON.stringify(l)}).then((t=>t.json()))},waitSeconds:function(t){return new Promise((e=>setTimeout(e,t*1e3)))},getUserInfo:function(){const t=this.configSetting;const e="https://seller.kuajingmaihuo.com/bg/quiet/api/mms/userInfo";const i={};fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Cookie:t.Cookie},body:JSON.stringify(i)}).then((t=>t.json())).then((e=>{console.log("getUserInfo: ",e);console.log("configSetting: ",t);if(e.success){this.malInfoList=e.result.companyList[0].malInfoList;this.getUserInfoState=true}else{console.warn(`获取用户信息失败: ${e.errorMsg}`)}})).catch((t=>{console.error("获取用户信息失败: ",t)}))},SMZQ_abandonPriceRuleAdd:function(){this.configSetting.abandonPriceRule.push({price:0,maxPrice:0})},SMZQ_abandonPriceRuleDelete:function(t,e){this.configSetting.abandonPriceRule.splice(t,1)},SMZQ_AbandonPriceRule:function(t){const e=this.configSetting.abandonPriceRule[0].price;const i=this.configSetting.abandonPriceRule[0].maxPrice;console.log(e,i);if(t<e){return 3}else if(t>i){return 2}else{return 1}},SMZQ_AbandonPriceSet:function(t){const e=this.configSetting.abandonPriceRule[0].price;const i=this.configSetting.abandonPriceRule[0].maxPrice;if(t>i){return i}else{return t}},SMZQ_searchForChainSupplier:function(t,e){const i=this.configSetting;const n="https://seller.kuajingmaihuo.com/marvel-mms/cn/api/kiana/xmen/select/searchForChainSupplier";e=typeof e=="undefined"?i.pageSize:e;const o={pageSize:e,pageNum:t,secondarySelectStatusList:[7],supplierTodoTypeList:[1]};return fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Cookie:i.Cookie,mallid:i.mallId},body:JSON.stringify(o)}).then((t=>t.json()))},SMZQ_rejectRemark:function(t){const e=this.configSetting;const i="https://seller.kuajingmaihuo.com/marvel-mms/cn/api/kiana/magnus/price/bargain-no-bom/batch/info/query";const n={orderIds:t};return fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Cookie:e.Cookie,mallid:e.mallId},body:JSON.stringify(n)}).then((t=>t.json()))},SMZQ_reviewNoBom:function(t){const e=this.configSetting;const i="https://seller.kuajingmaihuo.com/gmp/bg/magneto/api/price-review-order/no-bom/review";const n={priceOrderId:t};return fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Cookie:e.Cookie,mallid:e.mallId},body:JSON.stringify(n)}).then((t=>t.json()))},SMZQ_combineData:function(t){},SMZQ_bargainNoBom:function(t){const e=this.configSetting;const i="https://seller.kuajingmaihuo.com/marvel-mms/cn/api/kiana/magnus/price/bargain-no-bom/batch";return fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Cookie:e.Cookie,mallid:e.mallId},body:JSON.stringify(t)}).then((t=>t.json()))},HDSB_match_procution_data:function(t){const e=this.configSetting;const i=e.activityPriceRule[0].price;const n=e.activityPriceRule[0].maxPirce;const o=e.activityFilerStrRule;const s=this;s.fetchState=true;s.logList=[];let l=t;let a=[];if(o.length){console.log(o);s.logList.push({text:`排除掉所有SKU属性集包含的...`});let t=[];let e=0;for(let i=0;i<l.length;i++){let n=l[i];let o=false;for(let t=0;t<n.skcList.length;t++){let e=n.skcList[t];for(let t=0;t<e.skuList.length;t++){let i=e.skuList[t];for(let t in i){if(this.HDSB_activityFilterSKU(i[t])){s.logList.push({text:`排除：sku属性集${i[t]}中包含设置的字符`});o=true;break}}if(o)break}if(o)break}if(!o){t.push(n)}else{e++}}s.logList.push({text:`统计：共${l.length} 条数据,通过SKU属性集排除了${e}条数据`});l=t}l.forEach((t=>{let e={productId:t.productId,activityStock:t.targetActivityStock,skcList:[],sessionIds:t.suggestEnrollSessionIdList};t.skcList.forEach((o=>{let l={skcId:o.skcId,skuList:[]};if(o.sitePriceList){l["siteActivityPriceList"]=(o.sitePriceList?o.sitePriceList:[]).filter((t=>t.suggestActivityPrice>=i)).map((e=>{let i=e.suggestActivityPrice>n?n:e.suggestActivityPrice;s.logList.push({text:`${t.productId}---价格 ${e.suggestActivityPrice}=>${i}`});return{activityPrice:i,siteId:e.siteId}}));l["skuList"]=o.skuList.map((t=>({skuId:t.skuId})));if(l.siteActivityPriceList.length){e.skcList.push(l)}}else{o.skuList.forEach((e=>{let o={skuId:e.skuId,siteActivityPriceList:e.sitePriceList.filter((t=>t.suggestActivityPrice>=i)).map((e=>{let i=e.suggestActivityPrice>n?n:e.suggestActivityPrice;s.logList.push({text:`${t.productId}---价格 ${e.suggestActivityPrice}=>${i}`});return{activityPrice:i,siteId:e.siteId}}))};if(o.siteActivityPriceList.length){l.skuList.push(o)}}));if(l.skuList.length){e.skcList.push(l)}}}));if(e.skcList.length){a.push(e)}}));return a},HDSB_execute:async function(){const t=this.configSetting;const e=this.waitSeconds;const i=this;i.fetchState=true;i.logList=[];let n=true;let o=null;do{let s=await this.HDSB_getMatch(o);if(s.success){let t=s.result.matchList;n=s.result.hasMore;o=n?s.result.searchScrollContext:null;i.logList.push({text:`服务器返回数据成功, 共${t.length}条数据`});let e=this.HDSB_match_procution_data(t);if(e.length){let t=await this.HDSB_submit(e);if(t.success){i.logList.push({text:`活动申报成功,该页总归申报${e.length}个`})}else{i.logList.push({text:`活动申报失败`});console.warn(`活动申报失败: ${data.errorMsg}`)}}else{i.logList.push({text:`该页没有符合条件的数据`})}}else{i.logList.push({text:`获取商品信息失败`});console.warn(`获取商品信息失败: ${data.errorMsg}`)}i.logList.push({text:`等待${t.waitSeconds}秒请求....`});await e(t.waitSeconds)}while(n);i.fetchState=false;i.logList.push({text:`全部处理完成`})},SMZQ_execute:async function(){const t=this.configSetting;const e=this.waitSeconds;const i=this.SMZQ_searchForChainSupplier;const n=this.SMZQ_rejectRemark;const o=this.SMZQ_AbandonPriceRule;const s=this.SMZQ_AbandonPriceSet;const l=this.SMZQ_reviewNoBom;const a=this.SMZQ_bargainNoBom;const c=this;c.fetchState=true;c.logList=[];c.logInfo={index:0,totals:3,text:"正在拉取商品数据"};let r=0;let u=t.pageNum;if(t.autoPage){await i(1,1).then((e=>{console.log("getDataList(1,1): ",e);if(e.success){r=Math.ceil(e.result.total/t.pageSize)}else{c.logList.push({text:`获取商品信息失败`});console.warn(`获取商品信息失败: ${e.errorMsg}`)}})).catch((t=>{console.error("获取商品信息失败: ",t)}))}let g=[];let p=[];let d=[];do{c.logList.push({text:`等待${t.waitSeconds}秒请求: 发送请求第${u}页`});await e(t.waitSeconds);g.push(i(u));u++;if(u>r){c.logList.push({text:`请求商品列表结束,等待服务器返回数据`})}}while(u<=r);Promise.all(g).then((async i=>{let o=[];i.forEach((t=>{if(t.success){o.push(...t.result.dataList)}}));c.logList.push({text:`服务器返回数据成功, 共${o.length}条数据`});let s=[];for(let t=0;t<o.length;t++){const e=o[t];for(let t=0;t<e.skcList.length;t++){const i=e.skcList[t];c.logList.push({text:`正在处理SKC: ${i.skcId}`});for(let t=0;t<i.supplierPriceReviewInfoList.length;t++){const e=i.supplierPriceReviewInfoList[t];const n=e.status;if(n==0){c.logList.push({text:`跳过: 价格申报中`});continue}s.push(e.priceOrderId)}}}let l=this.sliceArrayInChunks(s,700);for(let[i,o]of l.entries()){c.logList.push({text:`等待${t.waitSeconds}秒请求第${i+1}片: 价格推荐信息=>700条一片`});await e(t.waitSeconds);p.push(n(o))}c.logInfo={index:1,totals:3,text:"正在处理上新审核价格"};return Promise.all(p)})).then((async i=>{c.logList.push({text:`请求商品列表结束,等待服务器返回数据`});let n=[];i.forEach((t=>{console.log(t);if(t.success){n.push(...t.result.priceReviewItemList)}}));c.logList.push({text:`服务器返回数据成功, 共${n.length}条数据`});c.logList.push({text:`等待: 组合提交数据`});let l=n.map((t=>{let e=o(t.suggestSupplyPrice);return e==3?{priceOrderId:t.id,supplierResult:e,items:t.skuInfoList.map((t=>({productSkuId:t.productSkuId})))}:{priceOrderId:t.id,supplierResult:e,items:t.skuInfoList.map((t=>({productSkuId:t.productSkuId,price:s(t.suggestSupplyPrice)})))}}));c.logList.push({text:`数据组合完毕: 共${l.length}条数据`});let r=this.sliceArrayInChunks(l,200);for(let[i,n]of r.entries()){c.logList.push({text:`等待${t.waitSeconds}秒请求第${i+1}片: 数据提交=>200条一片`});await e(t.waitSeconds);d.push(a({itemRequests:n}))}c.logInfo={index:2,totals:3,text:"正在处理最后数据提交"};return Promise.all(d)})).then((async t=>{t.forEach(((t,e)=>{if(t.success){c.logList.push({text:`返回=>第${e+1}片: 成功`})}else{c.logList.push({text:`返回=>第${e+1}片: 失败`})}}));c.logInfo={index:3,totals:3,text:"任务全部完成"}})).then((()=>{c.logList.push({text:`所有任务已完成`});c.fetchState=false})).catch((t=>{console.error("服务器返回数据失败: ",t)}))},SPLB_pageQuery:function(t,e){const i=this.configSetting;const n="https://seller.kuajingmaihuo.com/bg-visage-mms/product/skc/pageQuery";e=typeof e=="undefined"?i.pageSize:e;const o={pageSize:e,page:t,skcJitStatus:3,skcSiteStatus:0};return fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Cookie:i.Cookie,mallid:i.mallId},body:JSON.stringify(o)}).then((t=>t.json()))},SPLB_signJIT:function(t){const e=this.configSetting;const i="https://seller.kuajingmaihuo.com/bg-visage-mms/product/agreement/batch/sign";const n={skcList:t};return fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Cookie:e.Cookie,mallid:e.mallId},body:JSON.stringify(n)}).then((t=>t.json()))},SPLB_execute:async function(){const t=this.configSetting;const e=this.waitSeconds;const i=this.SPLB_pageQuery;const n=this.SPLB_signJIT;const o=this;o.fetchState=true;o.logList=[];let s=0;let l=t.pageNum;if(t.autoPage){await i(1,1).then((e=>{console.log("pageQuery(1,1): ",e);if(e.success){s=Math.ceil(e.result.total/t.pageSize)}else{o.logList.push({text:`获取商品信息失败`});console.warn(`获取商品信息失败: ${e.errorMsg}`)}})).catch((t=>{console.error("获取商品信息失败: ",t)}))}let a=[];do{o.logList.push({text:`等待${t.waitSeconds}秒请求: 发送请求第${l}页`});await e(t.waitSeconds);a.push(i(l));l++;if(l>s){o.logList.push({text:`请求商品列表结束,等待服务器返回数据`})}}while(l<=s);Promise.all(a).then((async i=>{let s=[];i.forEach((t=>{if(t.success){s.push(...t.result.pageItems)}}));o.logList.push({text:`服务器返回数据成功, 共${s.length}条数据`});console.log(s);let l=[];for(let t=0;t<s.length;t++){const e=s[t];l.push({productId:e.productId,productSkcId:e.productSkcId})}let a=[];for(let t=0;t<l.length;t+=20){a.push(l.slice(t,t+20))}if(a.length){for(let i=0;i<a.length;i++){const s=a[i];o.logList.push({text:`等待${t.waitSeconds}秒请求: 第${i+1}次签署,签署${s.length}个`});await e(t.waitSeconds);await n(s).then((t=>{if(t.success){o.logList.push({text:`签署成功: ${t.result.successNum}`});o.logList.push({text:`签署失败: ${t.result.failedNum}`});if(t.result.failedDetailList.length){for(let e=0;e<t.result.failedDetailList.length;e++){const i=t.result.failedDetailList[e];o.logList.push({text:`Skc: ${i.productSkcId}, ${i.errorMsg}`})}}}else{console.warn(`签署失败: ${t.errorMsg}`)}})).catch((t=>{console.error("签署失败: ",t)}))}}else{o.logList.push({text:`需要签署为空`})}o.fetchState=false})).catch((t=>{console.error("服务器返回数据失败: ",t)}))},HDSB_activityPirceAdd:function(){this.configSetting.activityPriceRule.push({price:0,maxPirce:0})},HDSB_activityFilerStrAdd:function(){this.configSetting.activityFilerStrRule.push({str:""})},HDSB_activityFilerStrDel:function(t){this.configSetting.activityFilerStrRule.splice(t,1)},HDSB_activityPirceDelete:function(t,e){this.configSetting.activityPriceRule.splice(t,1)},HDSB_activityFilterSKU:function(t){return this.configSetting.activityFilerStrRule.some((e=>new RegExp(e.str,"i").test(t)))},handleClick:async function(t){let e=await this.checkToken();if(!e){this.settingDrawer=false;return}if(t=="上新生命周期"){this.SMZQ_execute()}if(t=="批量签署JIT规则"){this.SPLB_execute()}if(t=="批量活动申报"){this.HDSB_execute()}this.clickState=t;this.dialogLogVisible=true},sliceArrayInChunks:function(t,e){const i=[];let n=0;while(n<t.length){i.push(t.slice(n,n+e));n+=e}return i}},watch:{configSetting:{handler(t,e){this.$nextTick((()=>{const e=unsafeWindow.document.body;e.classList.toggle("is-blockPopUps",t.blockPopUps);GM_setValue("configSetting",t)}))},deep:true}}};const o=Vue.createApp(n);o.use(ElementPlus);o.mount("#vueApp")})();